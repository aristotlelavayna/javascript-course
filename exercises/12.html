<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button class="js-button">Start</button>

    <button onclick="displayMessage();">Add to cart
    </button>

    <p class="js-message"></p>

    <button onclick="messages++; displayNotification();">Add</button>
    <button onclick="
        if (messages > 0) {
            messages--;
            if (messages === 0) {
                stopNotification();
            }
        }
    ">Remove</button>

    <script>
        const add = function () {
            console.log(2 + 3);
        };
        add();
        add();

        function runTwice(fun) {
            fun();
            fun();
        }

        runTwice(function () {
            console.log('12b');
        })

        runTwice(add);

        /* function updateButton() {
            const button = document.querySelector('.js-button');

            button.innerHTML = 'Loading...';

            setTimeout(() => {
                button.innerHTML = 'Finished!';
            }, 1000);
        } */

        document.querySelector('.js-button')
        .addEventListener('click', () => {
            const button = document.querySelector('.js-button');

            setTimeout(() => {
                button.innerHTML = 'Finished!';
            }, 1000);
        })

        let timeoutId;

        function displayMessage() {
            const messageElement = document.querySelector('.js-message');
            messageElement.innerHTML = 'Added';

            clearTimeout(timeoutId);

            timeoutId = setTimeout(() => {
                messageElement.innerHTML = '';
            }, 2000)
        }

        let messages = 2;
        let intervalId;

        let isDisplayingNotification;

        displayNotification();

        function displayNotification() {
        
        if (isDisplayingNotification) {
            return;
        }

        isDisplayingNotification = true;

        intervalId = setInterval(() => {
            if (document.title === 'App') {
            document.title = `(${messages}) New messages`;
            } else {
            document.title = 'App';
            }
        }, 1000);
        }

        function stopNotification() {
        isDisplayingNotification = false;

        clearInterval(intervalId);
        document.title = 'App';
        }
    </script>
</body>
</html>